<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GIS PEAK | Geospatial Intelligence Suite</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@300;400;600;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <style>
        :root {
            --neon: #00ff9d;
            --neon-glow: rgba(0, 255, 157, 0.3);
            --bg: #0a0c10;
            --panel: #111418;
            --text: #e0e0e0;
            --border: rgba(255, 255, 255, 0.1);
        }

        * { box-sizing: border-box; transition: all 0.3s ease; }
        body { background-color: var(--bg); color: var(--text); font-family: 'Exo 2', sans-serif; margin: 0; overflow-x: hidden; }

        /* Header Hero */
        .hero {
            height: 350px;
            background: linear-gradient(rgba(10,12,16,0.8), rgba(10,12,16,0.9)), 
                        url('https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=2072&auto=format&fit=crop');
            background-size: cover; background-position: center;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            text-align: center; border-bottom: 1px solid var(--neon-glow);
        }

        .hero h1 { font-size: 3rem; letter-spacing: 5px; margin: 0; color: #fff; text-transform: uppercase; }
        .hero p { opacity: 0.8; letter-spacing: 2px; }

        /* Hexagon Grid */
        .services-section { padding: 40px 0; text-align: center; }
        .hex-grid { display: flex; justify-content: center; gap: 30px; flex-wrap: wrap; padding: 0 20px; }
        .hex-item { width: 180px; cursor: pointer; }
        .hexagon {
            width: 140px; height: 160px;
            background: var(--panel); margin: 0 auto;
            clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
            display: flex; align-items: center; justify-content: center;
            border: 1px solid var(--border);
        }
        .hexagon:hover { border-color: var(--neon); box-shadow: 0 0 20px var(--neon-glow); transform: translateY(-5px); }
        .hex-icon { color: var(--neon); width: 40px; height: 40px; }
        .hex-label { margin-top: 10px; font-weight: 600; text-transform: uppercase; font-size: 0.8rem; }

        /* Dashboard & Tabs */
        .dashboard { max-width: 1100px; margin: 40px auto; background: var(--panel); border: 1px solid var(--border); border-radius: 8px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .tab-bar { display: flex; background: #0d1116; border-bottom: 1px solid var(--border); overflow-x: auto; }
        .tab { padding: 15px 25px; cursor: pointer; font-size: 0.75rem; font-weight: bold; color: #8b949e; border-right: 1px solid var(--border); white-space: nowrap; }
        .tab.active { color: var(--neon); background: var(--panel); border-bottom: 2px solid var(--neon); }

        .content-area { padding: 30px; display: none; min-height: 450px; }
        .content-area.active { display: block; animation: fadeIn 0.4s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        #map { height: 450px; width: 100%; background: #000; }

        /* Form & Tutorial Style */
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        input, textarea, select {
            background: #0a0c10; border: 1px solid #30363d; color: white;
            padding: 12px; border-radius: 4px; width: 100%; margin-bottom: 15px; font-family: inherit;
        }
        .btn-neon {
            background: transparent; border: 1px solid var(--neon); color: var(--neon);
            padding: 12px 30px; cursor: pointer; font-weight: bold; text-transform: uppercase; border-radius: 4px;
        }
        .btn-neon:hover { background: var(--neon); color: #000; box-shadow: 0 0 20px var(--neon); }

        .tut-card { border: 1px solid var(--border); padding: 20px; border-radius: 8px; margin-bottom: 15px; background: rgba(255,255,255,0.02); }
        .tut-card:hover { border-color: var(--neon); }

        /* Modali */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); backdrop-filter: blur(8px);
            display: none; align-items: center; justify-content: center; z-index: 2000;
        }
        .modal { background: var(--panel); width: 90%; max-width: 550px; border: 1px solid var(--neon); padding: 40px; border-radius: 8px; position: relative; }
        .close-modal { position: absolute; top: 20px; right: 20px; color: var(--neon); cursor: pointer; }

        /* Footer Disclaimer */
        footer { padding: 40px 20px; text-align: center; border-top: 1px solid var(--border); margin-top: 40px; font-size: 0.8rem; color: #666; }

        @media (max-width: 768px) {
            .grid-2 { grid-template-columns: 1fr; }
            .hero h1 { font-size: 2rem; }
        }
    </style>
</head>
<body>

    <section class="hero">
        <h1>GIS PEAK</h1>
        <p>Lab di Divulgazione Scientifica Geospaziale</p>
    </section>

    <section class="services-section">
        <div class="hex-grid">
            <div class="hex-item" onclick="openModal('m-analisi')">
                <div class="hexagon"><i data-lucide="brain-circuit" class="hex-icon"></i></div>
                <div class="hex-label">Analisi</div>
            </div>
            <div class="hex-item" onclick="openModal('m-web')">
                <div class="hexagon"><i data-lucide="globe-2" class="hex-icon"></i></div>
                <div class="hex-label">WebGIS</div>
            </div>
            <div class="hex-item" onclick="openModal('m-drone')">
                <div class="hexagon"><i data-lucide="navigation" class="hex-icon"></i></div>
                <div class="hex-label">Rilievi</div>
            </div>
        </div>
    </section>

    <div class="dashboard">
        <div class="tab-bar">
            <div class="tab active" onclick="switchTab(event, 'view-map')">Visualizzatore</div>
            <div class="tab" onclick="switchTab(event, 'view-tutorials')">GIS Academy</div>
            <div class="tab" onclick="switchTab(event, 'view-mission')">La Missione</div>
            <div class="tab" onclick="switchTab(event, 'view-info')">Contatti</div>
            <div class="tab" onclick="switchTab(event, 'view-login')">Login</div>
        </div>

        <div id="view-map" class="content-area active" style="padding:0">
            <div style="padding:15px; background: #161b22; display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                <span style="font-size:0.7rem; color:var(--neon); font-weight: bold;">CARICA GEOJSON:</span>
                <input type="file" id="fileInput" accept=".geojson,.json" style="width:auto; margin:0; border:none; background:transparent; font-size: 0.8rem;">
            </div>
            <div id="map"></div>
        </div>

        <div id="view-tutorials" class="content-area">
            <h2 style="color:var(--neon)">GIS Academy</h2>
            <p>Materiale gratuito per studenti e hobbisti.</p>
            <div class="tut-card">
                <h4>1. Iniziare con QGIS 3.34</h4>
                <p style="font-size:0.9rem; opacity:0.7;">Guida completa all'importazione dati Open Data.</p>
                <button class="btn-neon" style="padding:5px 15px">Leggi Guida</button>
            </div>
            <div class="tut-card">
                <h4>2. Dove trovare Dati Gratis (Open Data)</h4>
                <p style="font-size:0.9rem; opacity:0.7;">Link utili: OpenStreetMap, Portali Regionali, Copernicus.</p>
                <button class="btn-neon" style="padding:5px 15px">Vedi Risorse</button>
            </div>
        </div>

        <div id="view-mission" class="content-area">
            <h2 style="color:var(--neon)">No-Profit & Divulgazione</h2>
            <div class="tut-card" style="border-left: 4px solid var(--neon);">
                <p><strong>GIS PEAK</strong> è un progetto sperimentale senza scopo di lucro.</p>
                <p>Questo portale nasce con l'unico obiettivo di promuovere la cultura geospaziale e fornire uno spazio di prova per appassionati di cartografia digitale.</p>
                <ul style="line-height:2; opacity:0.8; font-size: 0.9rem;">
                    <li>✅ <strong>Finalità:</strong> Divulgazione scientifica e puro divertimento tecnologico.</li>
                    <li>✅ <strong>Accesso:</strong> Tutti i tutorial e gli strumenti sono gratuiti.</li>
                    <li>✅ <strong>Dati:</strong> Non raccogliamo né vendiamo dati a terzi.</li>
                </ul>
                <p style="font-style: italic; opacity: 0.6; font-size: 0.8rem;">"La conoscenza geografica deve essere libera e accessibile."</p>
            </div>
        </div>

        <div id="view-info" class="content-area">
            <h2 style="color:var(--neon)">Scrivici</h2>
            <p>Hai domande sui GIS o vuoi suggerire un tutorial? Contattaci liberamente.</p>
            <form onsubmit="event.preventDefault(); alert('Grazie per il messaggio! Ti risponderemo presto (progetto no-profit).');">
                <div class="grid-2">
                    <input type="text" placeholder="Tuo Nome" required>
                    <input type="email" placeholder="Email" required>
                </div>
                <textarea rows="4" placeholder="Cosa vorresti imparare o condividere?"></textarea>
                <button type="submit" class="btn-neon">Invia Messaggio</button>
            </form>
        </div>

        <div id="view-login" class="content-area">
            <div style="max-width:350px; margin: 40px auto; text-align: center;">
                <h3 style="color:var(--neon)">Area Collaboratori</h3>
                <p style="font-size: 0.8rem; opacity: 0.6; margin-bottom: 20px;">Accesso riservato agli editor del progetto scientifico.</p>
                <input type="text" placeholder="Username">
                <input type="password" placeholder="Password">
                <button class="btn-neon" style="width:100%">Accedi</button>
            </div>
        </div>
    </div>

    <footer>
        <p><strong>GIS PEAK</strong> | Progetto amatoriale di divulgazione scientifica geospaziale.</p>
        <p style="opacity: 0.5;">Non rappresenta una testata giornalistica o un'azienda. Solo per appassionati.</p>
    </footer>

    <div id="m-analisi" class="modal-overlay" onclick="closeModals()">
        <div class="modal" onclick="event.stopPropagation()">
            <i data-lucide="x" class="close-modal" onclick="closeModals()"></i>
            <h2 style="color:var(--neon)">Analisi Dati</h2>
            <p>Scopri come processiamo i dati vettoriali e raster per scopi di ricerca ambientale e urbana.</p>
        </div>
    </div>

    <div id="m-web" class="modal-overlay" onclick="closeModals()">
        <div class="modal" onclick="event.stopPropagation()">
            <i data-lucide="x" class="close-modal" onclick="closeModals()"></i>
            <h2 style="color:var(--neon)">WebGIS Lab</h2>
            <p>Sperimentazione di librerie open-source come Leaflet, OpenLayers e MapLibre.</p>
        </div>
    </div>

    <div id="m-drone" class="modal-overlay" onclick="closeModals()">
        <div class="modal" onclick="event.stopPropagation()">
            <i data-lucide="x" class="close-modal" onclick="closeModals()"></i>
            <h2 style="color:var(--neon)">Rilievi & Fotogrammetria</h2>
            <p>Esempi di nuvole di punti e modelli 3D derivati da rilievi open-data o simulazioni.</p>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        lucide.createIcons();

        // Inizializzazione Mappa con tema Dark
        const map = L.map('map').setView([41.9, 12.5], 6);
        L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; OpenStreetMap contributors &copy; CARTO'
        }).addTo(map);

        // Funzione Cambio Scheda (TAB)
        function switchTab(e, viewId) {
            document.querySelectorAll('.content-area').forEach(v => v.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            
            document.getElementById(viewId).classList.add('active');
            e.currentTarget.classList.add('active');
            
            // Forza il ricalcolo della dimensione mappa se la tab è 'view-map'
            if(viewId === 'view-map') {
                setTimeout(() => { map.invalidateSize(); }, 200);
            }
        }

        // Gestione Modali
        function openModal(id) { document.getElementById(id).style.display = 'flex'; }
        function closeModals() { document.querySelectorAll('.modal-overlay').forEach(m => m.style.display = 'none'); }

        // Caricamento file GeoJSON
        document.getElementById('fileInput').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = (ev) => {
                try {
                    const geojsonData = JSON.parse(ev.target.result);
                    const geoLayer = L.geoJSON(geojsonData, {
                        style: {
                            color: '#00ff9d',
                            weight: 2,
                            fillOpacity: 0.2
                        },
                        onEachFeature: (feature, layer) => {
                            if (feature.properties) {
                                let popupContent = '<div style="color:#333; font-family:sans-serif; font-size:12px;">';
                                for (let key in feature.properties) {
                                    popupContent += `<strong>${key}:</strong> ${feature.properties[key]}<br>`;
                                }
                                popupContent += '</div>';
                                layer.bindPopup(popupContent);
                            }
                        }
                    }).addTo(map);
                    map.fitBounds(geoLayer.getBounds());
                } catch (err) {
                    alert("Errore: Il file caricato non è un GeoJSON valido.");
                }
            };
            reader.readAsText(file);
        });
    </script>
</body>
</html>